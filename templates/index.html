<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Consulta de Imóveis</title>
  <style>
    #loading {
      display: none;
      font-weight: bold;
      margin-top: 10px;
      color: blue;
    }
  </style>
  <script>
    function mostrarLoading() {
      document.getElementById('loading').style.display = 'block';
    }
  </script>
</head>
<body>
  <h1>Buscar Preço Médio de Imóveis</h1>
  <form method="POST" onsubmit="mostrarLoading()">
    <label>Cidade:</label><br>
    <input name="cidade" required><br><br>

    <label>Estado:</label><br>
    <input name="estado" required><br><br>

    <label>Bairro:</label><br>
    <input name="bairro" required><br><br>

    <label>Metragem:</label><br>
    <input name="metragem" type="number" required><br><br>

    <label>Tipo:</label><br>
    <select name="tipo">
      <option value="apartamento">Apartamento</option>
      <option value="casa">Casa</option>
      <option value="terreno">Terreno</option>
    </select><br><br>

    <button type="submit">Buscar</button>
  </form>

  <div id="loading">Buscando imóveis, por favor aguarde...</div>

  {% if resultado %}
    <h2>Resultado</h2>
    <p>Imóveis encontrados: {{ resultado.quantidade_encontrada }}</p>
    <p>Preço médio total: R$ {{ resultado.media_valor_total }}</p>
    <p>Preço médio por m²: R$ {{ resultado.media_valor_m2 }}</p>
  {% elif erro %}
    <p style="color: red">{{ erro }}</p>
  {% endif %}
</body>
</html>
